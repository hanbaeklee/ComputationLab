\subsection*{Recursive formulation}
The heterogeneous household's problem is as follows:
\begin{align*}
  V(a,z;S) &= \max_{c,l,a'}\text{ } log(c) - \frac{\eta}{1+\frac{1}{\chi}}l^{1+\frac{1}{\chi}}+ \beta \mathbb{E}V(a',z';S')
  \\
  \text{s.t.}\quad& c + a' = (1+r(S))a + w(S)zl
  \\
  & a'\geq 0
  \\
  & A' \sim \Gamma_{A}(A|\chi) \quad(\text{Law of motion of TFP})
  \\
  & \chi' \sim \Gamma_{\chi}(\chi) \quad(\text{Law of motion of $\chi$})
  \\
  & z' \sim \pi(z)
\end{align*}
where $S = \{\Phi,A,\chi\}$ is the aggregate state; TFP takes two possible levels which is a function of uncertainty regime: $A\in\{A_{L}(\chi),A_{H}(\chi)\}$; the uncertainty regime takes two possible states: $\chi\in\{Low,High\}$.

Specifically, the aggregate uncertainty state $\chi$ affects the future domain of the TFP in the following way:
\begin{align*}
  A'_{L} = 
  \begin{cases}
    1 - \sigma \quad &\text{if } \chi = 0
    \\
    1 - \sigma*1.6 \quad &\text{if } \chi =1
  \end{cases}
  \quad
  A'_{H} = 
  \begin{cases}
    1 + \sigma \quad &\text{if } \chi = 0
    \\
    1 + \sigma*1.6 \quad &\text{if } \chi =1
  \end{cases}
\end{align*}
where $\chi=1$ indicates a high-uncertainty period. 
% The timing of the model is as follows:
% \begin{enumerate}
  % \item 
  Agents begin a period with the understanding of the uncertainty state. That is, agents choose the optimal allocations under the understanding of the next period's aggregate TFP domain.

The production side is as follows:
\begin{align*}
  \max_{K,L} A K^{\alpha}L^{1-\alpha} - w(S)L - (r(S)+\delta)K
\end{align*}

The capital rent $r(S)$ and the wage $w(S)$ are determined at the competitive market:
\begin{align*}
  [r]&:\quad \int a'(a,z;S)d\Phi(S) = K'(S)
  \\
  [w]&:\quad \int z l(a,z;S) d\Phi(S) = L(S)
\end{align*}
